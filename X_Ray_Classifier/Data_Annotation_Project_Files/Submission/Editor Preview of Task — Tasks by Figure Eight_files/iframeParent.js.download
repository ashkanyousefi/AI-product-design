!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=854)}({225:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ERR_IFRAME_ALREADY_ATTACHED_TO_DOM=n.ERR_NOT_IN_IFRAME=n.ERR_CONNECTION_TIMEOUT=n.ERR_CONNECTION_DESTROYED=void 0;var r="message";n.ERR_CONNECTION_DESTROYED="ConnectionDestroyed";n.ERR_CONNECTION_TIMEOUT="ConnectionTimeout";n.ERR_NOT_IN_IFRAME="NotInIframe";n.ERR_IFRAME_ALREADY_ATTACHED_TO_DOM="IframeAlreadyAttachedToDom";var o,a={"http:":"80","https:":"443"},i=/^(https?:|file:)?\/\/([^/:]+)?(:(\d+))?/,c={ERR_CONNECTION_DESTROYED:"ConnectionDestroyed",ERR_CONNECTION_TIMEOUT:"ConnectionTimeout",ERR_NOT_IN_IFRAME:"NotInIframe",ERR_IFRAME_ALREADY_ATTACHED_TO_DOM:"IframeAlreadyAttachedToDom",Promise:function(){try{return window?window.Promise:null}catch(e){return null}}(),debug:!1},u=(o=0,function(){return++o}),l=function(){if(c.debug){for(var e,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];(e=console).log.apply(e,["[Penpal]"].concat(t))}},d=function(e){var n=[];return e((function(){n.forEach((function(e){e()}))})),{then:function(e){n.push(e)}}},s=function(e){return{name:e.name,message:e.message,stack:e.stack}},f=function(e){var n=new Error;return Object.keys(e).forEach((function(t){return n[t]=e[t]})),n},m=function(e,n,t,o,a){var i=n.localName,d=n.local,s=n.remote,m=n.remoteOrigin,v=!1;l("".concat(i,": Connecting call sender"));a.then((function(){v=!0})),t.reduce((function(e,n){return e[n]=function(e){return function(){for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];if(l("".concat(i,": Sending ").concat(e,"() call")),s.closed&&o(),v){var p=new Error("Unable to send ".concat(e,"() call due ")+"to destroyed connection");throw p.code="ConnectionDestroyed",p}return new c.Promise((function(n,o){var a=u();d.addEventListener(r,(function t(c){if(c.source===s&&c.origin===m&&"reply"===c.data.penpal&&c.data.id===a){l("".concat(i,": Received ").concat(e,"() reply")),d.removeEventListener(r,t);var u=c.data.returnValue;c.data.returnValueIsError&&(u=f(u)),("fulfilled"===c.data.resolution?n:o)(u)}})),s.postMessage({penpal:"call",id:a,methodName:e,args:t},m)}))}}(n),e}),e)},v=function(e,n,t){var o=e.localName,a=e.local,i=e.remote,u=e.remoteOrigin,d=!1;l("".concat(o,": Connecting call receiver"));var f=function(e){if(e.source===i&&e.origin===u&&"call"===e.data.penpal){var t=e.data,r=t.methodName,a=t.args,f=t.id;if(l("".concat(o,": Received ").concat(r,"() call")),r in n){var m=function(e){return function(n){if(l("".concat(o,": Sending ").concat(r,"() reply")),d)l("".concat(o,": Unable to send ").concat(r,"() reply due to destroyed connection"));else{var t={penpal:"reply",id:f,resolution:e,returnValue:n};"rejected"===e&&n instanceof Error&&(t.returnValue=s(n),t.returnValueIsError=!0);try{i.postMessage(t,u)}catch(e){throw"DataCloneError"===e.name&&i.postMessage({penpal:"reply",id:f,resolution:"rejected",returnValue:s(e),returnValueIsError:!0},u),e}}}};new c.Promise((function(e){return e(n[r].apply(n,a))})).then(m("fulfilled"),m("rejected"))}}};a.addEventListener(r,f),t.then((function(){d=!0,a.removeEventListener(r,f)}))};c.connectToChild=function(e){var n,t=e.url,o=e.appendTo,u=e.iframe,s=e.methods,f=void 0===s?{}:s,p=e.timeout;if(u&&u.parentNode){var E=new Error("connectToChild() must not be called with an iframe already attached to DOM");throw E.code="IframeAlreadyAttachedToDom",E}var h=new d((function(e){n=e})),y=window;(u=u||document.createElement("iframe")).src=t;var g=function(e){var n,t,r,o=document.location,c=i.exec(e);if(c?(n=c[1]?c[1]:o.protocol,t=c[2],r=c[4]):(n=o.protocol,t=o.hostname,r=o.port),"file:"===n)return"null";var u=r&&r!==a[n]?":".concat(r):"";return"".concat(n,"//").concat(t).concat(u)}(t);return{promise:new c.Promise((function(e,t){var a;void 0!==p&&(a=setTimeout((function(){var e=new Error("Connection to child timed out after ".concat(p,"ms"));e.code="ConnectionTimeout",t(e),n()}),p));var i,c,s={},E=function(t){var r=u.contentWindow;if(t.source===r&&t.origin===g&&"handshake"===t.data.penpal){l("Parent: Received handshake, sending reply");var o="null"===t.origin?"*":t.origin;t.source.postMessage({penpal:"handshake-reply",methodNames:Object.keys(f)},o);var p={localName:"Parent",local:y,remote:r,remoteOrigin:o};c&&c();var E=new d((function(e){h.then(e),c=e}));v(p,f,E),i&&i.forEach((function(e){delete s[e]})),i=t.data.methodNames,m(s,p,i,n,h),clearTimeout(a),e(s)}};y.addEventListener(r,E),l("Parent: Loading iframe"),(o||document.body).appendChild(u);var w=setInterval((function(){document.contains(u)||(clearInterval(w),n())}),6e4);h.then((function(){u.parentNode&&u.parentNode.removeChild(u),y.removeEventListener(r,E),clearInterval(w);var e=new Error("Connection destroyed");e.code="ConnectionDestroyed",t(e)}))})),iframe:u,destroy:n}},c.connectToParent=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.parentOrigin,o=void 0===t?"*":t,a=n.methods,i=void 0===a?{}:a,u=n.timeout;if(window===window.top){var s=new Error("connectToParent() must be called within an iframe");throw s.code="NotInIframe",s}var f=new d((function(n){e=n})),p=window,E=p.parent,h=new c.Promise((function(n,t){var a;void 0!==u&&(a=setTimeout((function(){var n=new Error("Connection to parent timed out after ".concat(u,"ms"));n.code="ConnectionTimeout",t(n),e()}),u));var c=function t(c){if(("*"===o||o===c.origin)&&c.source===E&&"handshake-reply"===c.data.penpal){l("Child: Received handshake reply"),p.removeEventListener(r,t);var u={localName:"Child",local:p,remote:E,remoteOrigin:c.origin},d={};v(u,i,f),m(d,u,c.data.methodNames,e,f),clearTimeout(a),n(d)}};p.addEventListener(r,c),f.then((function(){p.removeEventListener(r,c);var e=new Error("Connection destroyed");e.code="ConnectionDestroyed",t(e)})),l("Child: Sending handshake"),E.postMessage({penpal:"handshake",methodNames:Object.keys(i)},o)}));return{promise:h,destroy:e}};var p=c;n.default=p},854:function(e,n,t){"use strict";t.r(n);var r=t(225),o=t.n(r);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}window.CF=window.CF||{};var i=window.CF;i.iframeConnections=i.iframeConnections||{},i.cmlIa=function(e,n){var t=document.getElementById(e),r=document.getElementById("assignment-worker-id"),c=function(e){return e.iframe.parentElement.parentElement.querySelector('input[type="hidden"]')},u=document.createElement("iframe");u.height=800,u.allowFullscreen=!0,u.allow="fullscreen";var l=o.a.connectToChild({url:"".concat(t.dataset.iframeSrc).concat(window.location.search||""),iframe:u,appendTo:t,methods:{getPayload:function(){var e=r?parseInt(r.innerText,10):"anonymous";return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}({},n,{worker_id:e})},clearSubmission:function(){var e=c(l);e.store("submission_successful",!1),e.value=""},updateCMLInput:function(e){var n=c(l);n&&(n.value=e,document.dispatchEvent(new CustomEvent("addOrRemoveField")))},triggerChanged:function(){var e=c(l),n=new CustomEvent("change",{bubbles:!0,cancelable:!1,detail:{forceUnsaved:!0}});e.dispatchEvent(n)}}});i.onSubmit=function(){return l.promise.then((function(e){return e.onSubmit()}))},i.iframeConnections[c(l).name]=l}}});